import sys, cv2, tensorflow as tf
video_in = sys.argv[1]
video_out = 'proc_'+video_in
cap = cv2.VideoCapture(video_in)
w,h = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH)), int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT))
out = cv2.VideoWriter(video_out, cv2.VideoWriter_fourcc(*'mp4v'), cap.get(5), (w,h))
# TensorFlowモデル読み込んでフレーム毎に検出・描画
while cap.isOpened():
  ret,frame = cap.read()
  if not ret: break
  # PB モデルで検出してbounding box描画...
  out.write(frame)
cap.release(); out.release()
